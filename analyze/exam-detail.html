<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>详情指数</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="./css/main.css">
    <script src="./js/echarts.min.js"></script>
</head>

<body>
    <div class="container">
        <span class="subtitle">课前预习</span>
        <div id="before" style="width: 100%;height:400px;"></div>

        <span class="subtitle">截屏测验</span>
        <div id="exam" style="width: 100%;height:400px;"></div>

        <span class="subtitle">课后作业</span>
        <div id="homework" style="width: 100%;height:400px;"></div>

        <span class="subtitle">随堂测验</span>
        <div id="class_exam" style="width: 100%;height:400px;"></div>
    </div>
    <script src="./js/jquery-3.2.1.min.js"></script>
    <script type="text/javascript">
        var chart1 = echarts.init(document.getElementById('before'));
        var option1 = {
            xAxis: {
                data: [],
                axisLine: {
                    lineStyle: {
                        color: '#cccccc'
                    }
                },
                boundaryGap: false,
                axisLabel: {
                    textStyle: {
                        color: '#666666',
                        fontWeight: '400'
                    }
                }
            },
            yAxis: {
                name: '单位/%',
                max: 100,
                nameTextStyle: {
                    color: '#999999',
                    fontSize: 12,
                },
                axisLine: {
                    lineStyle: {
                        color: '#cccccc'
                    }
                },
                axisLabel: {
                    textStyle: {
                        color: '#666666',
                        fontWeight: '400'
                    }
                }
            },

            dataZoom: [{
                startValue: ''
            }, {
                type: 'inside'
            }],

            series: [{
                name: '课前预习',
                type: 'line',
                data: [],
                smooth: true,
                smoothMonotone: 'x',
                symbolSize: 10,
                areaStyle: {
                    normal: {
                        opacity: 0.2
                    }
                },
                markLine: {
                    lineStyle: {
                        normal: {
                            type: 'solid'
                        }
                    },
                    symbol: '',
                    data: [{
                        yAxis: 100,
                        lineStyle: {
                            emphasis: {
                                type: 'solid',
                                width: 3
                            }
                        }
                    }, {
                        yAxis: 60,
                        lineStyle: {
                            normal: {
                                type: 'solid',
                                color: 'red'
                            }
                        }
                    }]
                },
                itemStyle: {
                    normal: {
                        color: '#00bda5',
                        borderWidth: 1,
                        label: {
                            show: true,
                            textStyle: {
                                color: '#999999',
                                fontSize: '10px'
                            },
                            position: 'top'
                        }
                    }
                },
                lineStyle: {
                    normal: {
                        color: '#00bda5',
                        width: 4
                    }
                }
            }]
        };
        chart1.setOption(option1);

        var chart2 = echarts.init(document.getElementById('exam'));
        var option2 = {
            xAxis: {
                data: [],
                axisLine: {
                    lineStyle: {
                        color: '#cccccc'
                    }
                },
                boundaryGap: false,
                axisLabel: {
                    textStyle: {
                        color: '#666666',
                        fontWeight: '400'
                    }
                }
            },
            yAxis: {
                name: '单位/%',
                max: 100,
                nameTextStyle: {
                    color: '#999999',
                    fontSize: 12,
                },
                axisLine: {
                    lineStyle: {
                        color: '#cccccc'
                    }
                },
                axisLabel: {
                    textStyle: {
                        color: '#666666',
                        fontWeight: '400'
                    }
                }
            },
            dataZoom: [{
                startValue: ''
            }, {
                type: 'inside'
            }],
            series: [{
                name: '截屏测验',
                type: 'line',
                data: [],
                smooth: true,
                smoothMonotone: 'x',
                symbolSize: 10,
                areaStyle: {
                    normal: {
                        opacity: 0.2
                    }
                },
                markLine: {
                    symbol: '',
                    lineStyle: {
                        normal: {
                            type: 'solid'
                        }
                    },
                    data: [{
                        yAxis: 100,
                        lineStyle: {
                            normal: {
                                type: 'solid',
                                color: '#00bda5'
                            }
                        }
                    }, {
                        yAxis: 60,
                        lineStyle: {
                            normal: {
                                type: 'solid',
                                color: 'red'
                            }
                        }
                    }]
                },
                itemStyle: {
                    normal: {
                        color: '#ff4526',
                        borderWidth: 1,
                        label: {
                            show: true,
                            textStyle: {
                                color: '#999999',
                                fontSize: '10px'
                            },
                            position: 'top'
                        }
                    }
                },
                lineStyle: {
                    normal: {
                        color: '#ff4526',
                        width: 4
                    }
                }
            }]
        };
        chart2.setOption(option2);

        var chart3 = echarts.init(document.getElementById('homework'));
        var option3 = {
            xAxis: {
                data: [],
                axisLine: {
                    lineStyle: {
                        color: '#cccccc'
                    }
                },
                boundaryGap: false,
                axisLabel: {
                    textStyle: {
                        color: '#666666',
                        fontWeight: '400'
                    }
                }
            },
            yAxis: {
                name: '单位/%',
                max: 100,
                nameTextStyle: {
                    color: '#999999',
                    fontSize: 12,
                },
                axisLine: {
                    lineStyle: {
                        color: '#cccccc'
                    }
                },
                axisLabel: {
                    textStyle: {
                        color: '#666666',
                        fontWeight: '400'
                    }
                }
            },
            dataZoom: [{
                startValue: ''
            }, {
                type: 'inside'
            }],
            series: [{
                name: '课后作业',
                type: 'line',
                data: [],
                smooth: true,
                smoothMonotone: 'x',
                symbolSize: 10,
                areaStyle: {
                    normal: {
                        opacity: 0.2
                    }
                },
                markLine: {
                    symbol: '',
                    lineStyle: {
                        normal: {
                            type: 'solid'
                        }
                    },
                    data: [{
                        yAxis: 100,
                        lineStyle: {
                            normal: {
                                type: 'solid',
                                color: '#00bda5'
                            }
                        }
                    }, {
                        yAxis: 60,
                        lineStyle: {
                            normal: {
                                type: 'solid',
                                color: 'red'
                            }
                        }
                    }]
                },
                itemStyle: {
                    normal: {
                        color: '#ffc600',
                        borderWidth: 1,
                        label: {
                            show: true,
                            textStyle: {
                                color: '#999999',
                                fontSize: '10px'
                            },
                            position: 'top'
                        }
                    }
                },
                lineStyle: {
                    normal: {
                        color: '#ffc600',
                        width: 4
                    }
                }
            }]
        };
        chart3.setOption(option3);

        var chart4 = echarts.init(document.getElementById('class_exam'));
        var option4 = {
            xAxis: {
                data: [],
                axisLine: {
                    lineStyle: {
                        color: '#cccccc'
                    }
                },
                boundaryGap: false,
                axisLabel: {
                    textStyle: {
                        color: '#666666',
                        fontWeight: '400'
                    }
                }
            },
            yAxis: {
                name: '单位/%',
                max: 100,
                nameTextStyle: {
                    color: '#999999',
                    fontSize: 12,
                },
                axisLine: {
                    lineStyle: {
                        color: '#cccccc'
                    }
                },
                axisLabel: {
                    textStyle: {
                        color: '#666666',
                        fontWeight: '400'
                    }
                }
            },
            dataZoom: [{
                startValue: ''
            }, {
                type: 'inside'
            }],
            series: [{
                name: '随堂测验',
                type: 'line',
                data: [],
                smooth: true,
                smoothMonotone: 'x',
                symbolSize: 10,
                areaStyle: {
                    normal: {
                        opacity: 0.2
                    }
                },
                markLine: {
                    symbol: '',
                    lineStyle: {
                        normal: {
                            type: 'solid'
                        }
                    },
                    data: [{
                        yAxis: 100,
                        lineStyle: {
                            normal: {
                                type: 'solid',
                                color: '#00bda5'
                            }
                        }
                    }, {
                        yAxis: 60,
                        lineStyle: {
                            normal: {
                                type: 'solid',
                                color: 'red'
                            }
                        }
                    }]
                },
                itemStyle: {
                    normal: {
                        color: '#ffc600',
                        borderWidth: 1,
                        label: {
                            show: true,
                            textStyle: {
                                color: '#999999',
                                fontSize: '10px'
                            },
                            position: 'top'
                        }
                    }
                },
                lineStyle: {
                    normal: {
                        color: '#ffc600',
                        width: 4
                    }
                }
            }]
        };
        chart4.setOption(option4);

        var url = 'http://w21.pdoca.com/WEBservice/HuDongKeTang/TeacherInfo.asmx/getBanJiAvgLearningAnalysis_CeYan_Detail';
        var defaultParam = {
            banJiID: 153,
            subjectID: '',
            startTime: '',
            endTime: ''
        }
        $.ajax({
            url: url,
            data: defaultParam,
            type: 'GET',
            success: function(data) {
                var data = JSON.parse($(data).text());
                var list = data.listData || [];
                var before_arr = [],
                    exam_arr = [],
                    homework_arr = [],
                    class_exam_arr = [],
                    classtitle_arr = [];
                list.forEach(function(obj) {
                    before_arr.push(obj['XiaoLv_KeQianRightPercent']);
                    exam_arr.push(obj['XiaoLv_JiePingRightPercent']);
                    homework_arr.push(obj['XiaoLv_KeHouRightPercent']);
                    class_exam_arr.push(obj['XiaoLv_KeZhongRightPercent']);
                    classtitle_arr.push(obj['tpTitleSmall'])
                })
                chart1.setOption({
                    xAxis: {
                        data: classtitle_arr
                    },
                    dataZoom: [{
                        startValue: classtitle_arr[classtitle_arr.length - 5]
                    }],
                    series: [{
                        data: before_arr
                    }]
                });
                chart2.setOption({
                    xAxis: {
                        data: classtitle_arr
                    },
                    dataZoom: [{
                        startValue: classtitle_arr[classtitle_arr.length - 5]
                    }],
                    series: [{
                        data: exam_arr
                    }]
                });
                chart3.setOption({
                    xAxis: {
                        data: classtitle_arr
                    },
                    dataZoom: [{
                        startValue: classtitle_arr[classtitle_arr.length - 5]
                    }],
                    series: [{
                        data: homework_arr
                    }]
                });
                chart4.setOption({
                    xAxis: {
                        data: classtitle_arr
                    },
                    dataZoom: [{
                        startValue: classtitle_arr[classtitle_arr.length - 5]
                    }],
                    series: [{
                        data: class_exam_arr
                    }]
                });
            },
            error: function(e) {
                alert('出错啦');
            }
        });
    </script>
</body>

</html>
